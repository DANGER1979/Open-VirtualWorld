// [ Система сидений ]
const MAX_BENCH = 123;
static const stock Float:BENCH_CORDS[MAX_BENCH][] =
{
	//Сидения в холле больницы
	{1398.0569,0.6776,1000.9175,89.2834},//0
	{1398.1000,1.9170,1000.9175,95.8636},
	{1398.1027,3.3013,1000.9175,94.6111},
	{1398.0996,5.5819,1000.9175,98.3718},
	{1398.0997,6.9658,1000.9175,93.0459},
	{1398.0898,8.3551,1000.9175,86.7800},
	{1390.8027,3.5140,1000.9175,173.2605},
	{1389.5729,3.5203,1000.9175,183.6005},
	{1388.2590,3.5181,1000.9175,190.8072},
	{1391.5549,5.6116,1000.9175,352.1987},
	{1390.1683,5.5987,1000.9175,355.3320},
	{1388.2131,5.6027,1000.9175,349.3787},//11
	//Сидения в комнате мед.персонала
	{1376.2178,-19.6776,1000.9274,271.4049},//12
	{1376.2086,-18.6945,1000.9274,279.2619},
	{1373.9530,-19.6755,1000.9274,86.8969},
	{1373.9618,-18.6930,1000.9274,91.5969},
	//Сидения около приёмной на втором этаже.
	{-2105.2869,-164.2580,1055.5898,18.3933},//16
	{-2103.8279,-164.2527,1055.5898,358.0265},
	{-2102.5042,-164.2525,1055.5898,357.7133},
	{-2101.2009,-164.2562,1055.5898,5.2333},
	//Сидения в кабинете министра больницы
	{-2112.7019,-155.6379,1055.6031,82.2906},//20
	{-2115.4744,-155.6453,1055.6031,266.8458},
	{-2115.2742,-157.4002,1055.6031,359.5931},
	{-2112.9800,-157.3976,1055.6031,354.5797},
	{-2114.1550,-164.0350,1055.5898,359.5930},//24

	//сиденья в PD
	{342.5978,-329.9555,1024.6765,267.9110}, //25
	{342.5925,-331.3787,1024.6765,266.0546},
	{340.1169,-315.7341,1024.6853,178.9475},
	{337.7789,-315.9163,1024.6853,172.0538},
	{338.1837,-329.5144,1024.6765,84.6561},
	{338.1821,-331.0414,1024.6765,97.8171},
	{338.1827,-334.2089,1024.6765,95.9376},
	{332.0591,-334.0416,1024.6765,279.5759},
	{332.0658,-332.7190,1024.6765,267.3557},
	{326.9544,-323.4174,1024.6765,340.9897},
	{322.0995,-323.4194,1024.6765,14.5397},
	{309.0901,-316.7821,1028.6653,273.3321},//второй этаж
	{309.1289,-315.2268,1028.6653,271.7888},
	{309.1382,-302.8163,1028.6653,266.7987},
	{309.1109,-301.2000,1028.6653,266.7986},
	{304.3186,-308.0746,1028.6750,1.7394},
	{303.3475,-308.0733,1028.6750,0.1960},
	{302.6494,-302.5562,1028.6750,143.7277},
	{300.1563,-303.4201,1028.6831,262.4819},
	{304.5454,-310.3772,1028.6750,177.2543},
	{303.2311,-310.3816,1028.6750,162.5276},
	{306.3824,-314.8769,1028.6750,91.1104},
	{306.3813,-316.6349,1028.6750,65.4404}, // 47

	//сиденья лкн
	{1391.9457,-4.4398,1004.5101,180.1688},//48
	{1391.8934,-6.5338,1004.5101,0.6501},
	{1395.9391,-5.9825,1004.5101,269.1791},
	{1395.9502,-4.7902,1004.5101,272.0226},
	{1399.1027,-5.2703,1004.5101,93.1539},
	{1388.6968,-14.7058,1004.5081,144.9480},
	{1387.2496,-15.4989,1004.5081,343.6032},
	{1380.7026,-14.0849,1004.5081,227.4022},
	{1380.7570,-15.4896,1004.5081,8.0900},
	{1381.9749,-15.4998,1004.5081,19.0568},
	{1383.1460,-20.0657,1000.9149,275.9924},
	{1385.1880,-19.1556,1000.9149,179.6532},
	{1386.6445,-19.1556,1000.9149,176.0616},
	{1388.1304,-19.1544,1000.9149,175.1216},
	{1385.1389,-21.1772,1000.9149,1.5565},
	{1386.6700,-21.1785,1000.9149,355.6032},
	{1388.0994,-21.1776,1000.9149,6.8832},
	{1380.3840,-21.9939,1000.9149,14.0896},
	{1379.2902,-21.9922,1000.9149,352.8060},
	{1378.4745,-20.5584,1000.9149,276.6887},
	{1378.4846,-19.3238,1000.9149,261.0453},
	{1363.7307,-12.5504,1000.9189,268.2755},
	{1385.6681,-13.9155,1000.9169,3.2635},
	{1374.8632,-7.4663,1000.9169,22.6906},
	{1375.9384,-5.9321,1000.9169,81.2845},
	{1374.9685,-3.9740,1000.9169,157.7386},
	{1381.4218,-7.0602,1000.9169,10.1804},
	{1381.3793,-3.8405,1000.9169,179.0685},
	{1380.0616,-5.2989,1000.9169,268.3694}, // 76

	////////Сидения 1-й этаж ФБР
	{-2447.7739,520.9031,54.5697,92.7712},//77
	{-2447.7778,522.4677,54.5697,90.2646},
	{-2447.7749,527.7714,54.5687,91.2045},
	{-2447.7751,529.0914,54.5687,100.2914},
	{-2464.9519,536.8344,54.5687,187.0852},
	{-2464.4011,533.1408,54.5687,355.9731},
	{-2465.5178,533.1424,54.5687,358.5034},
	{-2471.8794,533.9070,54.5687,9.1568},
	{-2474.3647,533.9854,54.5687,2.2401},
	{-2475.3997,533.9917,54.5687,4.1200},
	{-2471.7100,535.9481,54.5687,184.2649},
	{-2472.7622,535.9471,54.5687,178.1665},
	{-2474.3384,535.9495,54.5687,175.3464},
	{-2476.4048,534.9484,54.5687,274.1924},
	{-2482.7688,535.0743,54.5687,285.7858},
	{-2475.7905,522.7232,54.5687,185.2520}, //92
	////////Сидения 2-й этаж ФБР
	{-2462.7002,525.9589,74.5757,269.0363},//93
	{-2462.7024,523.9155,74.5757,267.1797},
	{-2459.5005,531.2576,74.2647,269.9996},
	{-2456.2881,529.4094,73.9647,268.4329},
	{-2456.2888,525.9837,73.9647,274.6997},
	{-2459.5002,523.9202,74.2647,268.4329},
	{-2475.7546,521.1254,74.5757,200.4623},
	{-2473.5120,521.4930,74.5757,176.0223},
	{-2470.9346,518.3394,74.5757,90.1915},
	{-2473.5808,515.2184,74.5757,5.2539},
	{-2469.7976,536.9502,74.5757,93.9517},
	{-2472.3857,535.0536,74.5757,292.0036},
	{-2482.0000,537.0178,74.5757,270.3834},
	{-2482.0020,535.0128,74.5757,291.6667}, // 106
	////////Сидения подвал ФБР
	{-2482.8323,531.6353,1054.5657,268.6014},//107
	{-2475.2385,518.0464,1054.5657,265.0100},
	{-2475.2383,520.2535,1054.5657,263.9014},
	{-2471.1121,521.2554,1054.5657,179.6139},
	{-2471.1770,519.5634,1054.5657,3.3973}, //111

	////////Сидения этаж1 автошкола
	{1695.2781,862.4310,1008.4514,184.1721},//112
	{1696.4480,862.4553,1008.4514,183.5456},
	{1702.4171,862.4464,1008.4514,180.1224},
	{1703.4918,862.4517,1008.4514,166.0223},
	{1687.2008,859.9169,1008.4514,272.5570},
	{1688.1353,850.1343,1008.4514,269.4237}, // 117
	
	////////Сидения этаж2 автошкола
	{1709.6333,852.2825,1012.6981,279.7161},//118
	{1689.4556,857.9674,1012.6981,182.8953},
	{1690.5874,857.9698,1012.6981,174.4589},
	{1689.3596,851.8127,1012.6981,359.6172},
	{1690.4933,851.8180,1012.6981,2.7507}//122
};

//const MAX_INT_BENCH = 30;
new BENCH_INFO[MAX_BENCH] = {INVALID_PLAYER_ID, ...};
new bench_ID[MAX_PLAYERS] = {-1, ...};
new bench_VW[MAX_PLAYERS];


// -- актеры на сиденьях
const MAX_BENCH_ACTOR = 8; //Но в целом, в с++ лучше использовать const везде
enum BENCH_ACTOR_INFO
{
	bSkin,
	Float:bX,
	Float:bY,
	Float:bZ,
	Float:bAngle
}
static const stock BECNCH_ACTOR[MAX_BENCH_ACTOR][BENCH_ACTOR_INFO] =
{
	//мед.персонал этаж1
	{88,1398.0953,-1.0389,1000.9175,102.0790},//0
	{41,1398.0986,-2.3166,1000.9175,95.2093},
	{235,1398.1019,-3.6131,1000.9175,88.6537},
	{55,1382.1423,-0.2636,1000.9175,271.9555},
	{69,1382.1410,1.0209,1000.9175,263.4954},
	{215,1382.1467,2.3109,1000.9175,259.4219},
	{308,1391.7281,-7.2488,1000.9175,354.4354},//6
	//мед.персонал этаж2
	{169,-2103.1895,-164.2413,1055.5898,0.5338}//7
};

stock bench_OnGameModeInit()
{
	for(new b; b < MAX_BENCH; b ++)
	{
	    /*for(new ib; ib < MAX_INT_BENCH; ib ++)
	    {
	    	BENCH_INFO[b] = INVALID_PLAYER_ID;
		}*/
		if(b >= 0 && b <= 15) // медики первый этаж
		{
		    for(new vw = MEDIC_LS_WORLD1; vw <= MEDIC_LV_WORLD1; vw ++)
		    {
		    	Create3DTextLabelEx("Сесть\n{31BA81}Нажмите Y", -1, BENCH_CORDS[b][0],BENCH_CORDS[b][1],BENCH_CORDS[b][2], 5.0, INVALID_PLAYER_ID,INVALID_VEHICLE_ID,0, vw);
			}
		}
		if(b >= 16 && b <= 24) // медики второй этаж
		{
		    for(new vw = MEDIC_LS_WORLD2; vw <= MEDIC_LV_WORLD2; vw ++)
		    {
		   		Create3DTextLabelEx("Сесть\n{31BA81}Нажмите Y", -1, BENCH_CORDS[b][0],BENCH_CORDS[b][1],BENCH_CORDS[b][2], 5.0, INVALID_PLAYER_ID,INVALID_VEHICLE_ID,0, vw);
			}
		}
		else if(b >= 25 && b <= 47)//сиденья в PD
  		{
	    	Create3DTextLabelEx( "Сесть\n{31BA81}Нажмите Y", -1, BENCH_CORDS[b][0],BENCH_CORDS[b][1],BENCH_CORDS[b][2], 5.0, INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1, POLICE_LS_WORLD);
		}
		
		else if(b >= 48 && b <= 76)//сиденья лкн
		{
		    Create3DTextLabelEx( "Сесть\n{31BA81}Нажмите Y", -1, BENCH_CORDS[b][0],BENCH_CORDS[b][1],BENCH_CORDS[b][2], 5.0, INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1, MAX_HOUSE+MAX_BIZ+LCN);
		}

		else if(b >= 108 && b <= 113)//Сидения подвал ФБР
		{
	    	Create3DTextLabelEx( "Сесть\n{31BA81}Нажмите Y", 0x008080FF, BENCH_CORDS[b][0],BENCH_CORDS[b][1],BENCH_CORDS[b][2], 5.0, INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1, FBI_SF_WORLD0);
		}
		else if(b >= 77 && b <= 93)//Сидения 1-й этаж ФБР
		{
	    	Create3DTextLabelEx( "Сесть\n{31BA81}Нажмите Y", 0x008080FF, BENCH_CORDS[b][0],BENCH_CORDS[b][1],BENCH_CORDS[b][2], 5.0, INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1, FBI_SF_WORLD1);
		}
		else if(b >= 94 && b <= 107)//Сидения 2-й этаж ФБР
		{
	    	Create3DTextLabelEx( "Сесть\n{31BA81}Нажмите Y", 0x008080FF, BENCH_CORDS[b][0],BENCH_CORDS[b][1],BENCH_CORDS[b][2], 5.0, INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1, FBI_SF_WORLD2);
		}
		
		else if(b >= 114 && b <= 122)//Сидения автошкола
		{
	    	Create3DTextLabelEx( "Сесть\n{31BA81}Нажмите Y", -1, BENCH_CORDS[b][0],BENCH_CORDS[b][1],BENCH_CORDS[b][2], 5.0, INVALID_PLAYER_ID,INVALID_VEHICLE_ID,1, MAX_HOUSE+MAX_BIZ+DoE);
		}
	}

	for(new ba = 0; ba <= 6; ba ++)
	{
	    for(new i = MEDIC_LS_WORLD1; i <= MEDIC_LV_WORLD1; i ++)
	    { // медики первый этаж
    		new a_id = CreateDynamicActor(BECNCH_ACTOR[ba][bSkin], BECNCH_ACTOR[ba][bX], BECNCH_ACTOR[ba][bY], BECNCH_ACTOR[ba][bZ], BECNCH_ACTOR[ba][bAngle], true, 100.0, i);
			ApplyDynamicActorAnimation(a_id, "PED", "SEAT_DOWN", 4.1, 0, 0, 0, 1, 0);
		}
	}
	//for(new ba=7; ba <= MAX_BENCH_ACTOR; ba ++)
	//{
	new ba = 7;
    for(new i = MEDIC_LS_WORLD2; i <= MEDIC_LV_WORLD2; i ++)
    { // медики второй этаж
   		new a_id = CreateDynamicActor(BECNCH_ACTOR[ba][bSkin], BECNCH_ACTOR[ba][bX], BECNCH_ACTOR[ba][bY], BECNCH_ACTOR[ba][bZ], BECNCH_ACTOR[ba][bAngle], true, 100.0, i);
		ApplyDynamicActorAnimation(a_id, "PED", "SEAT_DOWN", 4.1, 0, 0, 0, 1, 0);
	}
	//}
	
	//--------------------------------------------------------------------------
	print("  vw_bench.inc Система скамеек By: DANGER1979");
	print("_____________________________________________");
	print(" ");
}

stock bench_OnPlayerConnect(playerid)
{
	bench_ID[playerid] = -1;
	bench_VW[playerid] = 0;
}

stock bench_OnPlayerDisconnect(playerid)
{
	if(bench_ID[playerid] == -1) return 1;
    BENCH_INFO[bench_ID[playerid]] = INVALID_PLAYER_ID;
    bench_ID[playerid] = -1;
    bench_VW[playerid] = 0;
	return 1;
}

stock bench_OnPlayerKeyState_YES(playerid)
{
	if(bench_ID[playerid] != -1) return 1;
	for(new i; i < MAX_BENCH; i ++)
	{
		if(IsPlayerInRangeOfPoint(playerid, 1.0, BENCH_CORDS[i][0], BENCH_CORDS[i][1], BENCH_CORDS[i][2]))
		{
		    if(BENCH_INFO[i] != INVALID_PLAYER_ID) return SendErr(playerid, "Данная скамейка занята!");
		    
		    SetPlayerPosEx(playerid,  BENCH_CORDS[i][0], BENCH_CORDS[i][1], BENCH_CORDS[i][2], BENCH_CORDS[i][3]);
		    //SetPlayerFacingAngle(playerid, BENCH_CORDS[i][3]);
			LoopingAnim(playerid, "PED", "SEAT_down", 4.1, 0, 0, 0, 1, 0);
			//ApplyAnimation(playerid, "PED", "SEAT_DOWN",4.1, 0, 0, 0, 1, 0);
			//ApplyAnimation(playerid, "PED", "SEAT_DOWN",4.0, 0, 0, 0, 0, 0);

		    bench_ID[playerid] = i;
		    BENCH_INFO[i] = playerid;
		    bench_VW[playerid] = GetPlayerVirtualWorld(playerid);
			break;
		}
	}
	return 1;
}

stock bench_OnPlayerKeyState_SPRINT(playerid)
{
	/*if(GetPVarInt(playerid, "UseLoopAnim") == 1)
	{
	    if(Anti_Sbiv[playerid] != 0) return 1;
		StopLoopingAnim(playerid);
		SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
	}*/

	/*if(nMaterialsCheck[playerid] == 1)
	{
		nMaterialsCheck[playerid] = 0;
		SendClientMessage(playerid, 0x00FA9AFF, "Вы прекратили воровство материалов");
		SendClientMessage(playerid, 0x9ACD32FF, "Доставьте материалы на базу для их дальнейшей переработки");
	}*/
	if(bench_ID[playerid] != -1)
	{
	    BENCH_INFO[bench_ID[playerid]] = INVALID_PLAYER_ID;
	    bench_ID[playerid] = -1;
	    bench_VW[playerid] = 0;
	}
	return 1;
}


stock bench_OneSecondTimers(playerid)
{
	#pragma unused playerid
/*
	if(bench_ID[playerid] == -1) return 1;
    if( !IsPlayerInRangeOfPoint(playerid, 1.5, BENCH_CORDS[bench_ID[playerid]][0],BENCH_CORDS[bench_ID[playerid]][1],BENCH_CORDS[bench_ID[playerid]][2]) )
	{
	    BENCH_INFO[bench_ID[playerid]] = INVALID_PLAYER_ID;
	    bench_ID[playerid] = -1;
	    bench_VW[playerid] = 0;
	}
	return 1;
*/
}

stock bench_OnPlayerDeath(playerid, killerid, reason)
{
	#pragma unused killerid
	#pragma unused reason
	if(bench_ID[playerid] == -1) return 1;
    BENCH_INFO[bench_ID[playerid]] = INVALID_PLAYER_ID;
    bench_ID[playerid] = -1;
    bench_VW[playerid] = 0;
	return 1;
}
